<!DOCTYPE html>
<html lang="pt"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Loja ‚Äî Valdo Cria√ß√µes</title><link rel="stylesheet" href="assets/styles.css">
<style>.card .thumb{aspect-ratio:4/3;background:#0d0f14}.card .thumb img{width:100%;height:100%;object-fit:cover;cursor:zoom-in}
#zoom{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.85);z-index:9999;padding:20px}#zoom img{max-width:95vw;max-height:90vh}</style>
</head>
<body>
<header><div class="container nav"><div class="brand"><a class="logo" href="index.html">V</a>
<div><strong>Valdo Cria√ß√µes</strong><br><span class="fine">Sublima√ß√£o & Impress√£o 3D</span></div></div>
<div><a class="btn" href="index.html">In√≠cio</a></div></div></header>
<main class="container"><h1>Loja</h1>
<div class="tabs" id="cats"></div><div class="tabs" id="subcats"></div><div class="tabs" id="groups"></div>
<div class="toolbar"><div class="search"><input id="q" placeholder="Procurar produto..."><a id="clear" class="btn">Limpar</a></div></div>
<section><div class="grid" id="grid"></div></section></main>
<footer><div class="container fine">¬© 2025 Valdo Cria√ß√µes</div></footer>

<script id="prod-json" type="application/json">{"categorias":[
{"nome":"Sublima√ß√£o","imagem":"https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1200&auto=format&fit=crop",
 "subcategorias":[
  {"nome":"T√™xteis","grupos":[
    {"nome":"Sweatshirts","items":[{"titulo":"Sweatshirt Namast√™","descricao":"Sublima√ß√£o HD","preco":"‚Ç¨24,90",
      "imagem":"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=600&auto=format&fit=crop"}]},
    {"nome":"T-shirts","items":[{"titulo":"T-shirt t√©cnica branca","descricao":"Poli√©ster leve","preco":"‚Ç¨12,90",
      "imagem":"https://images.unsplash.com/photo-1542060748-10c28b62716f?q=80&w=600&auto=format&fit=crop"}]}
  ]},
  {"nome":"Cer√¢mica","grupos":[
    {"nome":"Canecas","items":[
      {"titulo":"Caneca 330 ml","descricao":"Resistente √† m√°quina de lavar","preco":"‚Ç¨9,90",
       "imagem":"https://images.unsplash.com/photo-1517705008128-361805f42e86?q=80&w=600&auto=format&fit=crop"}]}
  ]}
 ]},
{"nome":"3D","imagem":"https://images.unsplash.com/photo-1581091215367-59ab6b11cfb3?q=80&w=1200&auto=format&fit=crop",
 "subcategorias":[{"nome":"Resina 3D","items":[{"titulo":"Miniatura em resina","descricao":"Alto detalhe","preco":"desde ‚Ç¨29,00",
 "imagem":"https://images.unsplash.com/photo-1557814769-96d38c6f7e8d?q=80&w=600&auto=format&fit=crop"}]}]},
{"nome":"Promo√ß√µes","imagem":"https://images.unsplash.com/photo-1517840901100-8179e982acb7?q=80&w=1200&auto=format&fit=crop",
 "subcategorias":[{"nome":"Ofertas da Semana","items":[{"titulo":"Pack Canecas","descricao":"2 por pre√ßo especial","preco":"‚Ç¨16,90",
 "imagem":"https://images.unsplash.com/photo-1505575972945-280ac5357a46?q=80&w=600&auto=format&fit=crop"}]}]}
]}</script>

<script>
const TEL="351919707023";
const state={cat:null,sub:null,grp:null,q:""};

function getData(){try{return JSON.parse(document.getElementById('prod-json').textContent)}catch(e){alert("JSON inv√°lido: "+e.message);return{categorias:[]}}}
function el(t,c,x){const e=document.createElement(t);if(c)e.className=c;if(x)e.textContent=x;return e}

function renderCats(d){
  const elC=document.getElementById('cats'); elC.innerHTML='';
  (d.categorias||[]).forEach(c=>{
    const b=el('div','tab'+(state.cat===c.nome?' active':''),c.nome);
    b.onclick=()=>{state.cat=c.nome;state.sub=null;state.grp=null;state.q='';const q=document.getElementById('q');if(q)q.value='';render(d)};
    elC.appendChild(b);
  });
  // no auto-select -> show welcome until user clicks
}

function renderSubcats(d){
  const elS=document.getElementById('subcats'); elS.innerHTML='';
  const cat=(d.categorias||[]).find(c=>c.nome===state.cat); if(!cat) return;
  (cat.subcategorias||[]).forEach(s=>{
    const b=el('div','subtab'+(state.sub===s.nome?' active':''),s.nome);
    b.onclick=()=>{state.sub=s.nome;state.grp=null;state.q='';const q=document.getElementById('q');if(q)q.value='';renderGroups(d);renderGrid(d)};
    elS.appendChild(b);
  });
}

function renderGroups(d){
  const elG=document.getElementById('groups'); elG.innerHTML='';
  const cat=(d.categorias||[]).find(c=>c.nome===state.cat); if(!cat) return;
  const sub=(cat.subcategorias||[]).find(s=>s.nome===state.sub); if(!sub||!Array.isArray(sub.grupos)){state.grp=null;return;}
  sub.grupos.forEach(g=>{
    const b=el('div','subtab'+(state.grp===g.nome?' active':''),g.nome);
    b.onclick=()=>{state.grp=g.nome;state.q='';const q=document.getElementById('q');if(q)q.value='';renderGrid(d)};
    elG.appendChild(b);
  });
  if(!state.grp && sub.grupos[0]) state.grp=sub.grupos[0].nome;
}

function renderWelcome(){
  const grid=document.getElementById('grid');
  grid.classList.remove('dense');
  grid.innerHTML=`
    <article class="welcome">
      <h2>Bem-vindo √† loja üëã</h2>
      <p class="muted">Escolhe uma categoria acima para come√ßar.</p>
      <ul>
        <li>Pagamento r√°pido: <b>MB Way</b></li>
        <li>Sublima√ß√£o t√™xtil, cer√¢mica e muito mais</li>
        <li>Impress√£o 3D em resina, PLA, PETG, ASA e ABS</li>
      </ul>
      <div class="cta" style="margin-top:12px">
        <a class="btn" href="https://wa.me/351919707023?text=Ol%C3%A1%2C%20quero%20saber%20mais" target="_blank">WhatsApp</a>
      </div>
    </article>`;
}

function renderCatHero(d){
  const grid=document.getElementById('grid'); if(state.sub) return;
  grid.innerHTML='';
  const cat=(d.categorias||[]).find(c=>c.nome===state.cat); if(!cat) return;
  const box=document.createElement('article'); box.className='cat-hero';
  const imgW=document.createElement('div'); imgW.className='img';
  const img=new Image(); img.src=cat.imagem||''; img.loading='lazy'; imgW.appendChild(img);
  const body=document.createElement('div'); body.className='body';
  const h=document.createElement('h2'); h.textContent=cat.nome;
  const p=document.createElement('p'); p.textContent='Escolhe um submenu acima para ver os produtos.';
  body.appendChild(h); body.appendChild(p); box.appendChild(imgW); box.appendChild(body); grid.appendChild(box);
}

function matchQ(it){ if(!state.q) return true; const q=state.q.toLowerCase(); return (it.titulo||'').toLowerCase().includes(q)||(it.descricao||'').toLowerCase().includes(q); }

function renderGrid(d){
  const grid=document.getElementById('grid'); grid.innerHTML='';
  if(!state.cat){renderWelcome();return;}
  const cat=(d.categorias||[]).find(c=>c.nome===state.cat); if(!cat) return;
  const sub=(cat.subcategorias||[]).find(s=>s.nome===state.sub); if(!sub){renderCatHero(d);return;}

  let items=[];
  if(Array.isArray(sub.grupos)&&sub.grupos.length){ const grp=sub.grupos.find(g=>g.nome===state.grp)||sub.grupos[0]; items=(grp.items||[]).filter(matchQ); }
  else { items=(sub.items||[]).filter(matchQ); }

  if(items.length>=8) grid.classList.add('dense'); else grid.classList.remove('dense');
  if(items.length===0){ grid.appendChild(el('p','muted','Sem produtos nesta vista.')); return; }

  items.forEach(it=>{
    const card=el('article','card');
    const thumb=el('div','thumb');
    const img=new Image(); img.src=it.imagem||''; img.loading='lazy'; img.onclick=()=>openZoom(img.src); thumb.appendChild(img);
    const body=el('div','body');
    const h=el('h3','',it.titulo||'Produto'); const dsc=el('p','muted',it.descricao||''); const pr=el('div','price',it.preco||'');
    const cta=el('div','cta'); const w=el('a','btn primary','Pedir via WhatsApp (MB Way)');
    const msg=encodeURIComponent((it.titulo||'Produto')+(it.preco?(' ‚Äî '+it.preco):'')); w.href='https://wa.me/'+TEL+'?text='+msg; w.target='_blank';
    cta.appendChild(w);
    body.appendChild(h); body.appendChild(dsc); body.appendChild(pr); body.appendChild(cta);
    card.appendChild(thumb); card.appendChild(body); grid.appendChild(card);
  });
}

function wireSearch(d){
  const q=document.getElementById('q'); const clr=document.getElementById('clear');
  q.value=state.q||''; q.addEventListener('input',()=>{state.q=q.value;renderGrid(d)});
  clr.addEventListener('click',()=>{q.value='';state.q='';renderGrid(d)});
}

function applyHash(d){
  const hash=location.hash.replace(/^#/,''); if(!hash) return;
  const p=new URLSearchParams(hash); const cat=p.get('cat'), sub=p.get('sub'), grp=p.get('grp');
  if(cat) state.cat=decodeURIComponent(cat); if(sub) state.sub=decodeURIComponent(sub); if(grp) state.grp=decodeURIComponent(grp);
}

function render(d){
  renderCats(d); renderSubcats(d); renderGroups(d);
  if(!state.cat){renderWelcome();return;}
  if(!state.sub){renderCatHero(d);return;}
  renderGrid(d);
}

(function start(){
  const d=getData(); applyHash(d); state.q=''; render(d); wireSearch(d);
  window.addEventListener('hashchange',()=>{applyHash(d);render(d)});
})();

</script>
<div id="zoom"><img alt=""></div>
<script>
const zoomEl=document.getElementById('zoom');
function openZoom(src){zoomEl.querySelector('img').src=src;zoomEl.style.display='grid';}
zoomEl.addEventListener('click',()=>{zoomEl.style.display='none';zoomEl.querySelector('img').src='';});
</script>
</body></html>